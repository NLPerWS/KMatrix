{"lineList": [{"from": "kehpw9q4jj", "label": "knowledge_info -> knowledge_info", "label_from": "knowledge_info", "label_from_outputList": ["knowledge_info"], "label_to": "knowledge_info", "label_to_inputList": ["query_obj", "knowledge_info", "test_data_info", "train_data_info", "dev_data_info"], "to": "fg9oz5lgf"}, {"from": "f8hlrppuse", "label": "value -> query_obj", "label_from": "value", "label_from_outputList": ["value"], "label_to": "query_obj", "label_to_inputList": ["query_obj", "knowledge_info", "test_data_info", "train_data_info", "dev_data_info"], "to": "fg9oz5lgf"}, {"from": "fg9oz5lgf", "label": "final_result -> retriever_list", "label_from": "final_result", "label_from_outputList": ["final_result"], "label_to": "retriever_list", "label_to_inputList": ["query_obj", "retriever_list"], "to": "nxnivt8mdf"}, {"from": "f8hlrppuse", "label": "value -> query_obj", "label_from": "value", "label_from_outputList": ["value"], "label_to": "query_obj", "label_to_inputList": ["query_obj", "retriever_list"], "to": "nxnivt8mdf"}, {"from": "nxnivt8mdf", "label": "prompt_obj -> query_obj", "label_from": "prompt_obj", "label_from_outputList": ["prompt_obj"], "label_to": "query_obj", "label_to_inputList": ["query_obj", "train_data_info", "dev_data_info"], "to": "8wi33ai056"}, {"from": "8wi33ai056", "label": "final_result -> checkData", "label_from": "final_result", "label_from_outputList": ["final_result"], "label_to": "checkData", "label_to_inputList": ["checkData"], "to": "pkuwgkz2i6"}, {"from": "pkuwgkz2i6", "label": "no -> value", "label_from": "no", "label_from_outputList": ["yes", "no"], "label_to": "value", "label_to_inputList": ["value"], "to": "f8hlrppuse"}, {"from": "pkuwgkz2i6", "label": "yes -> params", "label_from": "yes", "label_from_outputList": ["yes", "no"], "label_to": "params", "label_to_inputList": ["params"], "to": "p9jh3n40qr"}], "name": "v16_infer_iterative", "nodeList": [{"codeFilePath": "kninjllm/llm_dataloader/knowledgeLoader.py", "ico": "el-icon-time", "id": "kehpw9q4jj", "initParams": [{"name": "tag", "type": "str\n(固定)\n此知识的tag", "value": "文本数据库: wikipedia"}, {"name": "knowledge_path", "type": "str\n(固定)", "value": ""}, {"name": "elasticIndex", "type": "str\n(固定)\nES的index", "value": "wiki_pedia"}], "inputParams": [], "left": "720px", "name": "Knowledge_wikipedia", "outputParams": [{"name": "knowledge_info", "type": "Dict[str, Any]", "value": ""}], "state": "success", "top": "134px", "type": "Knowledge_wikipedia"}, {"codeFilePath": "kninjllm/llm_retriever/contriever/contriever_retriever.py", "components": [], "description": "", "ico": "el-icon-time", "id": "fg9oz5lgf", "initParams": [{"name": "model_path", "type": "str\n(可选)\n模型地址", "value": ""}, {"name": "top_k", "type": "int\n(可选)\n根据得分排序,并返回前k条", "value": 3}, {"name": "executeType", "type": "str\n(必选)\n动作类型,可选参数: \ninfer\nevaluate\ntrain", "value": "infer"}], "inputParams": [{"name": "query_obj", "type": "Dict[str, Any]", "value": ""}, {"name": "knowledge_info", "type": "Dict[str, Any]", "value": ""}, {"name": "test_data_info", "type": "Dict[str, Any]", "value": ""}, {"name": "train_data_info", "type": "Dict[str, Any]", "value": ""}, {"name": "dev_data_info", "type": "Dict[str, Any]", "value": ""}], "left": "732px", "name": "ContrieverRetriever", "outputParams": [{"name": "final_result", "type": "List[List[Dict[str, Any]]]", "value": ""}], "state": "success", "top": "507px", "type": "ContrieverRetriever"}, {"codeFilePath": "kninjllm/llm_common/mutiplexer.py", "components": [], "description": "", "ico": "el-icon-time", "id": "f8hlrppuse", "initParams": [], "inputParams": [{"name": "value", "type": "Dict[str,Any]", "value": "{\"question\":\"\"}"}], "left": "404px", "name": "Multiplexer", "outputParams": [{"name": "value", "type": "Dict[str,Any]", "value": ""}], "state": "success", "top": "37px", "type": "Multiplexer"}, {"codeFilePath": "kninjllm/llm_builder/prompt_builder.py", "components": [], "description": "Prompt generation based on the template\n", "ico": "el-icon-time", "id": "nxnivt8mdf", "initParams": [{"name": "template", "type": "str\n(必选)\npython的Julia2模板字符串", "value": "Answer the question based on the given document. \nOnly give me the answer and do not output any other words. \nThe following are given documents: \\n\n{% for doc in retriever_list%}\n    {{ doc['content'] }}\n{% endfor %}\n\\nQuestion: {{query_obj['question']}} \\n\nAnswer:"}], "inputParams": [{"name": "query_obj", "type": "Dict[str,Any]", "value": ""}, {"name": "retriever_list", "type": "List[List[Dict[str, Any]]]", "value": ""}], "left": "375px", "name": "PromptBuilder", "outputParams": [{"name": "prompt_obj", "type": "Dict[str, Any]", "value": ""}], "state": "success", "top": "317px", "type": "PromptBuilder"}, {"codeFilePath": "kninjllm/llm_generator/base_generator/self_rag/self_rag_generator.py", "description": "", "ico": "el-icon-time", "id": "8wi33ai056", "initParams": [{"name": "api_key", "type": "str\n(可选)", "value": ""}, {"name": "model_path", "type": "str\n(可选)", "value": ""}, {"name": "executeType", "type": "str\n(必选)\n动作类型,可选参数:\ninfer(推理)\ntrain(训练)", "value": "infer"}], "inputParams": [{"name": "query_obj", "type": "Dict[str, Any]", "value": ""}, {"name": "train_data_info", "type": "Dict[str, Any]", "value": ""}, {"name": "dev_data_info", "type": "Dict[str, Any]", "value": ""}], "left": "414px", "name": "RagGenerator", "outputParams": [{"name": "final_result", "type": "Dict[str, Any]", "value": ""}], "state": "success", "top": "581px", "type": "RagGenerator"}, {"codeFilePath": "kninjllm/llm_router/conditional_router.py", "description": "Used for IterativePipeline task to determine whether the maximum number of cycles has been reached,yes: yes no: no\n", "ico": "el-icon-time", "id": "pkuwgkz2i6", "initParams": [{"name": "max_loop_count", "type": "int\n(可选)\n控制流图最大循环次数,\n可以在routes中使用 temp_loop_count 和 max_loop_count 来判断流图是否到达最大循环次数", "value": 3}, {"name": "routes", "type": "str\n(固定)\nroutes数组,具体请查看文档", "value": "[{\"condition\": \"{{ temp_loop_count >= max_loop_count }}\",\"output\": \"{{ checkData }}\",\"output_name\": \"yes\",\"output_type\": Dict[str,Any]},{\"condition\": \"{{ temp_loop_count < max_loop_count}}\",\"output\": \"{{ {\\\"question\\\":checkData['query'].split('\t<=>\t')[0] + '\t<=>\t' + checkData['content']  } }}\",\"output_name\": \"no\",\"output_type\": Dict[str,Any]}]"}], "inputParams": [{"name": "checkData", "type": "Any", "value": ""}], "left": "50.6667px", "name": "IterativeRouter", "outputParams": [{"name": "yes", "type": "str", "value": ""}, {"name": "no", "type": "str", "value": ""}], "state": "success", "top": "171px", "type": "IterativeRouter"}, {"codeFilePath": "kninjllm/llm_builder/output_builder.py", "components": [], "description": "", "ico": "el-icon-time", "id": "p9jh3n40qr", "initParams": [], "inputParams": [{"name": "params", "type": "List[Dict[str, Any]]", "value": ""}], "left": "36px", "name": "OutputBuilder", "outputParams": [{"name": "final_result", "type": "Dict[str, Any]", "value": ""}], "state": "success", "top": "522px", "type": "OutputBuilder"}], "pipeLineType": "Deployment"}